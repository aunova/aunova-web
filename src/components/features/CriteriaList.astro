---
import CTABox from "./CTABox.astro";
import { Globe, Clock, Scale, Coins, Handshake, Rocket } from "lucide-astro";
const criteriaIcons = [Globe, Clock, Scale, Coins, Handshake, Rocket];

export interface CriteriaItem {
  question: string;
  continuation?: string;
}

export interface Props {
  title: string;
  intro: string;
  criteria: (string | CriteriaItem)[];
  boundary: string;
  closingStatement?: string;
  lang?: string;
}

const { title, intro, criteria, boundary, closingStatement = "We build for the long term.", lang = "en" } = Astro.props;
const buttonLink = `/${lang}/contact`;
---

<section class="criteria-section">
  <div class="criteria-header">
    <h2 class="criteria-title">{title}</h2>
    <p class="criteria-intro">{intro}</p>
  </div>

  <div class="criteria-cards">
    {criteria.map((item, index) => {
      const isObject = typeof item === "object";
      const question = isObject ? item.question : item;
      const continuation = isObject ? item.continuation : undefined;
      return (
        <article class="criteria-card">
          <div class="criteria-circle" aria-hidden="true">
            {(() => { const Icon = criteriaIcons[index]; return Icon ? <Icon size={22} /> : null; })()}
          </div>
          <div class="criteria-content">
            <p class="criteria-question">{question}</p>
            {continuation && <p class="criteria-continuation">{continuation}</p>}
          </div>
        </article>
      );
    })}
  </div>

  <p class="boundary-text">{boundary}</p>

  <p class="closing-statement">{closingStatement}</p>

  <CTABox buttonLink={buttonLink} />
</section>

<style>
  .criteria-section {
    max-width: 100%;
    margin: 0 auto;
  }

  .criteria-header {
    text-align: center;
    margin-bottom: var(--space-3xl, 3rem);
  }

  .criteria-title {
    font-family: var(--font-heading);
    font-size: var(--text-h1);
    font-weight: 700;
    color: var(--color-primary);
    margin: 0 0 var(--space-lg, 1.5rem) 0;
    line-height: var(--lh-heading);
  }

  .criteria-intro {
    font-family: var(--font-heading);
    font-size: var(--text-body);
    color: #000;
    margin: 0;
    line-height: 1.7;
    text-align: center;
  }

  .criteria-cards {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg, 1.5rem);
    margin-bottom: var(--space-3xl, 3rem);
  }

  .criteria-card {
    display: flex;
    align-items: center;
    gap: var(--space-lg, 1.5rem);
    padding: var(--space-xl);
    background: var(--color-white);
    border: 3px solid #D7A5A5;
    border-radius: 10px;
    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.08));
  }

  .criteria-circle {
    width: 48px;
    height: 48px;
    min-width: 48px;
    border-radius: 50%;
    background: var(--color-primary);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
  }

  .criteria-circle :global(svg) {
    width: 22px;
    height: 22px;
  }

  .criteria-content {
    flex: 1;
  }

  .criteria-question {
    font-family: var(--font-heading);
    font-size: var(--text-h3);
    font-weight: 700;
    color: var(--color-primary);
    margin: 0;
    line-height: 1.4;
  }

  .criteria-continuation {
    font-family: var(--font-heading);
    font-size: var(--text-body-sm);
    font-weight: 700;
    color: #000;
    margin: var(--space-xs) 0 0;
    line-height: 1.6;
  }

  .boundary-text {
    font-family: var(--font-heading);
    font-size: var(--text-body);
    color: #000;
    text-align: center;
    margin: 0 0 var(--space-xl, 2rem) 0;
    line-height: 1.7;
    margin-left: auto;
    margin-right: auto;
  }

  .closing-statement {
    font-family: var(--font-heading);
    font-size: var(--text-h2);
    font-weight: 700;
    color: var(--color-primary);
    text-align: center;
    margin: 0 0 var(--space-2xl, 3rem) 0;
    line-height: 1.3;
  }

  @media (max-width: 768px) {
    .criteria-title {
      font-size: var(--text-2xl);
    }

    .criteria-intro {
      font-size: 1.125rem;
      line-height: 1.6;
    }

    .criteria-card {
      padding: var(--space-xl) var(--space-lg);
      gap: var(--space-md);
    }

    .criteria-circle {
      width: 56px;
      height: 56px;
      min-width: 56px;
    }

    .criteria-circle :global(svg) {
      width: 28px;
      height: 28px;
    }

    .criteria-question {
      font-size: 1.125rem;
      line-height: 1.4;
    }

    .criteria-continuation {
      font-size: 1rem;
      line-height: 1.5;
    }

    .boundary-text {
      font-size: 1rem;
      line-height: 1.5;
    }

    .closing-statement {
      font-size: 1.25rem;
      line-height: 1.3;
    }
  }
</style>
